<mat-card>
  <form class="ix-form-container" [formGroup]="form">
    <ix-fieldset title="Saves Immediately">
      <ix-details-table>
        <ix-details-item label="Login Banner:">
          <ix-editable
            [controls]="[form.controls.motd]"
            (closed)="saveFields(['motd'])"
          >
            <div view>
              @if (form.value.motd) {
                <div class="motd-preview">
                  {{ form.value.motd }}
                </div>
              }
            </div>

            <div edit>
              <ix-textarea formControlName="motd"></ix-textarea>
            </div>
          </ix-editable>
        </ix-details-item>

        <ix-details-item label="Boot Scrub (Save On Enter):">
          <ix-editable
            [controls]="[form.controls.boot_scrub]"
            (closed)="saveFields(['boot_scrub'])"
          >
            <div view>
              {{ form.value.boot_scrub }}
            </div>

            <div edit>
              <ix-input
                editableSaveOnEnter
                formControlName="boot_scrub"
                type="number"
              ></ix-input>
            </div>
          </ix-editable>
        </ix-details-item>

        <ix-details-item label="Serial Console (multiple fields):">
          <ix-editable
            [controls]="[form.controls.serialconsole, form.controls.serialport]"
            (closed)="saveFields(['serialconsole', 'serialport'])"
          >
            <div view>
              @if (!form.value.serialconsole) {
                {{ 'Not enabled' }}
              } @else {
                Enabled at port {{ form.value.serialport }}
              }
            </div>
            <div edit>
              <ix-checkbox
                formControlName="serialconsole"
                [label]="'Enable Serial Console'"
              ></ix-checkbox>

              @if (form.value.serialconsole) {
                <ix-input
                  style="margin: 0"
                  formControlName="serialport"
                  [label]="'Serial Port'"
                ></ix-input>
              }
            </div>
          </ix-editable>
        </ix-details-item>
      </ix-details-table>
    </ix-fieldset>
  </form>
</mat-card>

